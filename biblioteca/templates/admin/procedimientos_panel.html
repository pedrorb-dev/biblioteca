<!-- En templates/admin/procedimientos_panel.html -->
{% extends "admin/base_site.html" %}
{% load i18n static admin_urls %}

{% block extrastyle %}
{{ block.super }}
<style>
.procedimientos-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 20px;
    margin-top: 20px;
}
.procedimiento-card {
    border: 1px solid #e0e0e0;
    border-radius: 8px;
    padding: 20px;
    transition: all 0.3s ease;
    background: white;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}
.procedimiento-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
}
.procedimiento-icon {
    font-size: 2em;
    margin-bottom: 15px;
    display: block;
}
.procedimiento-title {
    font-size: 1.2em;
    font-weight: bold;
    margin-bottom: 10px;
    color: #333;
}
.procedimiento-desc {
    color: #666;
    margin-bottom: 15px;
    line-height: 1.4;
}
.btn-procedimiento {
    width: 100%;
    padding: 10px;
    font-weight: bold;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
}
.btn-primary {
    background-color: #007bff;
}
.btn-primary:hover {
    background-color: #0056b3;
}
.btn-success {
    background-color: #28a745;
}
.btn-success:hover {
    background-color: #1e7e34;
}
.alert-info {
    background: #e3f2fd;
    border: 1px solid #bbdefb;
    color: #1565c0;
    padding: 15px;
    border-radius: 6px;
    margin-bottom: 20px;
}
</style>
{% endblock %}

{% block breadcrumbs %}
<div class="breadcrumbs">
<a href="{% url 'custom_admin:index' %}">{% trans 'Home' %}</a>
&rsaquo; Procedimientos Visuales
</div>
{% endblock %}

{% block content %}
<div id="content-main">
    <div class="module">
        <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 8px 8px 0 0;">
            <h2>ðŸ“Š Procedimientos de Biblioteca</h2>
        </div>
        
        <!-- ESTADO DE PROCEDIMIENTOS -->
        {% if estado.total == 0 %}
        <div class="alert-info">
            <h4><i class="fas fa-exclamation-triangle"></i> Procedimiento no creado</h4>
            <p>El procedimiento "Reporte de PrÃ©stamos por Carrera" no existe en la base de datos.</p>
            <a href="{% url 'custom_admin:crear_procedimientos' %}" 
               class="button" style="background: #4caf50; color: white; padding: 8px 16px; border-radius: 4px; text-decoration: none;">
                <i class="fas fa-plus-circle"></i> Crear Procedimiento
            </a>
        </div>
        {% endif %}
        
        <!-- PANEL DE PROCEDIMIENTOS -->
        <div class="procedimientos-grid">
            {% for proc in procedimientos %}
            <div class="procedimiento-card">
                <span class="procedimiento-icon">{{ proc.nombre|slice:":2" }}</span>
                <div class="procedimiento-title">{{ proc.nombre }}</div>
                <div class="procedimiento-desc">{{ proc.descripcion }}</div>
                
                <form method="post" action="{{ proc.url }}">
                    {% csrf_token %}
                    <button type="submit" class="btn-procedimiento btn-{{ proc.color }}">
                        <i class="fas fa-play-circle"></i> Ejecutar
                    </button>
                </form>
            </div>
            {% endfor %}
        </div>
    </div>
</div>
{% endblock %}